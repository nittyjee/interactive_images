<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image with Video Overlay and Multiple SVG Markers</title>
<style>

html, body {
    margin: 0;
    padding: 0;
    height: 100%; /* Ensures full height */
    background-color: black; /* Set the background color to black */
    display: flex;
    align-items: center; /* Vertically center the image */
    justify-content: center; /* Horizontally center the image */
}

.image-wrapper img {
    display: block;
    max-width: 100vw; /* Fits the image within the window width */
    max-height: 100vh; /* Fits the image within the window height */
    width: auto; /* Maintain aspect ratio */
    height: auto; /* Maintain aspect ratio */
}

    @keyframes pulsate {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
    }
    @keyframes wave-animation {
        0% {
            transform: scale(0.5);
            opacity: 1;
        }
        100% {
            transform: scale(2.5);
            opacity: 0;
        }
    }
    .wave {
        position: absolute;
        border: 5px solid rgb(255, 255, 255);
        border-radius: 50%;
        animation: wave-animation 2s infinite ease-out;
        top: 48%;
        left: 48%;
        width: 14px;
        height: 14px;
        margin-top: -12px; /* Half of the height */
        margin-left: -12px; /* Half of the width */
        pointer-events: none; /* Allows clicking on the underlaying marker */
        z-index: -5; /* Behind the marker but above the image */
    }
    .marker {
        position: absolute;
        cursor: pointer;
        width: 24px; /* Width of the SVG icon */
        height: 24px; /* Height of the SVG icon */
        z-index: 10; /* Lower z-index than the overlay */
        animation: pulsate 1.5s ease-in-out infinite; /* Apply the animation */
    }
    .marker svg {
        display: block; /* Ensure SVG fills the marker container completely */
        width: 100%;
        height: 100%;
    }
    .video-overlay {
        position: absolute; /* Positions over the image */
        top: 0;
        left: 0;
        width: 100%; /* Takes the full width of the outer wrapper */
        height: 100%; /* Takes the full height of the outer wrapper */
        background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent black background */
        display: flex; /* Centers the iframe */
        align-items: center; /* Vertically centers */
        justify-content: center; /* Horizontally centers */
        visibility: hidden; /* Hidden initially */
        z-index: 100; /* Higher z-index to ensure it's on top */
    }
    .close-button {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 30px;
        font-weight: bold;
        color: white;
        cursor: pointer;
    }

    video {
        width: 90%;
        height: 90%;
        display: none; /* Hidden by default */
    }

</style>
<script>
    
    function toggleVideo(videoId) {
        var videoOverlay = document.getElementById('videoOverlay');
        var videoElement = document.getElementById(videoId);
        
        videoOverlay.style.visibility = 'visible'; // Open the overlay
        videoElement.style.display = 'block'; // Display the video
        videoElement.currentTime = 0; // Reset video time to the start
        videoElement.play(); // Start the video

        // Auto close the overlay when the video ends
        videoElement.onended = function() {
            closeVideo(videoId);
        };
    }

    function closeVideo(videoId) {
        var videoOverlay = document.getElementById('videoOverlay');
        var videoElement = document.getElementById(videoId);
        
        videoOverlay.style.visibility = 'hidden'; // Close the overlay
        videoElement.style.display = 'none'; // Hide the video
        videoElement.pause(); // Stop the video
        videoElement.currentTime = 0; // Reset the video time
    }

    window.onclick = function(event) {
        var videoOverlay = document.getElementById('videoOverlay');
        if (event.target == videoOverlay) {
            closeVideo();
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const markers = [
            { position: { x: 69.60, y: 22.19 }, videoId: 'fort-amsterdam-video' },
            { position: { x: 44.35, y: 33.83 }, videoId: 'broadway-video' },
            { position: { x: 35.13, y: 37.49 }, videoId: 'fort-amsterdam-video' },
            { position: { x: 35.28, y: 44.87 }, videoId: 'church-video' },
            { position: { x: 75.54, y: 50.43 }, videoId: 'the-wall-video' },
            { position: { x: 52.75, y: 58.00 }, videoId: 'canal-video' },
            { position: { x: 34.60, y: 64.87 }, videoId: 'kierstede-house-video' },
            { position: { x: 51.95, y: 69.50 }, videoId: 'house-of-enslaved-workers-video' },
            { position: { x: 35.35, y: 74.22 }, videoId: 'dock-video' },
            { position: { x: 49.00, y: 81.35 }, videoId: 'city-hall-video' },
            { position: { x: 4.31, y: 91.10 }, videoId: 'about-video' }
        ];

        const imageWrapper = document.querySelector('.image-wrapper');
        markers.forEach(marker => {
            const markerElement = document.createElement('div');
            markerElement.className = 'marker';
            markerElement.style.left = marker.position.x + '%';
            markerElement.style.top = marker.position.y + '%';

            // Create the core marker SVG
            const svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svgElement.setAttribute("viewBox", "0 0 16 16");
            svgElement.innerHTML = `
                <circle cx="8" cy="8" r="8" fill="red"/>
                <circle cx="8" cy="8" r="3" fill="white"/>
            `;
            
            markerElement.appendChild(svgElement);

            // Create waves
            for (let i = 1; i <= 3; i++) {
                const wave = document.createElement('div');
                wave.className = 'wave';
                wave.style.animationDelay = `${i * 0.7}s`; // stagger the animation
                markerElement.appendChild(wave);
            }

            markerElement.onclick = () => toggleVideo(marker.videoId);
            imageWrapper.appendChild(markerElement);
        });
    });
</script>
</head>

<body>
    <div class="image-wrapper">
        <img src="https://newamsterdamhistorycenter.org/wp-content/uploads/2024/02/Main_screen2.png" alt="Background Image">
        <div class="video-overlay" id="videoOverlay">
            <span class="close-button" onclick="closeVideo()">Ã—</span>
        </div>
    </div>

    <!-- Local Video Elements -->
    <video id="fort-amsterdam-video">
        <source src="vids/Fort.webm" type="video/webm">
    </video>
    <video id="broadway-video">
        <source src="vids/Broadway.webm" type="video/webm">
    </video>
    <video id="church-video">
        <source src="vids/Church.webm" type="video/webm">
    </video>
    <video id="the-wall-video">
        <source src="vids/Wall_Final.webm" type="video/webm">
    </video>
    <video id="canal-video">
        <source src="vids/Canel.webm" type="video/webm">
    </video>
    <video id="kierstede-house-video">
        <source src="vids/Kierstede.webm" type="video/webm">
    </video>
    <video id="house-of-enslaved-workers-video">
        <source src="vids/HouseEnslaved_Final.webm" type="video/webm">
    </video>
    <video id="dock-video">
        <source src="vids/Dock.webm" type="video/webm">
    </video>
    <video id="city-hall-video">
        <source src="vids/CityHall.webm" type="video/webm">
    </video>
    <video id="about-video">
        <source src="vids/AboutFinalFinal.webm" type="video/webm">
    </video>
</body>

</html>
